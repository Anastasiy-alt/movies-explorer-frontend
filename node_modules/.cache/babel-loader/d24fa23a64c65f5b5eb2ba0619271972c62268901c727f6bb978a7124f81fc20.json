{"ast":null,"code":"import _classCallCheck from\"/Users/anastasiavolokitina/Documents/GitHub/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/anastasiavolokitina/Documents/GitHub/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(option){_classCallCheck(this,Api);this._baseUrl=option.baseUrl;this._headers=option.headers;}_createClass(Api,[{key:\"_check\",value:function _check(res){if(res.ok){return res.json();}return res.json().then(function(err){err.statusCode=res.status;return Promise.reject(err);});}},{key:\"getUser\",value:function getUser(){var _this=this;return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{credentials:'include',headers:this._headers,method:'GET'}).then(function(res){return _this._check(res);});}},{key:\"setUser\",value:function setUser(userData){var _this2=this;return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{credentials:'include',headers:this._headers,method:'PATCH',body:JSON.stringify({name:userData.name,email:userData.email})}).then(function(res){return _this2._check(res);});}},{key:\"getSavedMovies\",value:function getSavedMovies(){var _this3=this;return fetch(\"\".concat(this._baseUrl,\"/movies\"),{credentials:'include',headers:this._headers,method:'GET'}).then(function(res){return _this3._check(res);});}},{key:\"addMovies\",value:function addMovies(movieData){var _this4=this;return fetch(\"\".concat(this._baseUrl,\"/movies\"),{credentials:'include',method:'POST',headers:this._headers,body:JSON.stringify({country:movieData.country,director:movieData.director,duration:movieData.duration,year:movieData.year,description:movieData.description,image:movieData.image,trailer:movieData.trailer,nameRU:movieData.nameRU,nameEN:movieData.nameEN,thumbnail:movieData.thumbnail,movieId:movieData.movieId})}).then(function(res){return _this4._check(res);});}},{key:\"deleteSavedMovie\",value:function deleteSavedMovie(movieId){var _this5=this;return fetch(\"\".concat(this._baseUrl,\"/movies/\").concat(movieId),{credentials:'include',method:'DELETE',headers:this._headers}).then(function(res){return _this5._check(res);});}},{key:\"signUp\",value:function signUp(name,email,password){var _this6=this;return fetch(\"\".concat(this._baseUrl,\"/signup\"),{credentials:'include',method:'POST',headers:this._headers,body:JSON.stringify({name:name,password:password,email:email})}).then(function(res){return _this6._check(res);});}}]);return Api;}();var api=new Api({baseUrl:'https://api.movies.anastasiya.nomoredomains.club/',headers:{'Content-Type':'application/json'}});export default api;","map":{"version":3,"names":["Api","option","_baseUrl","baseUrl","_headers","headers","res","ok","json","then","err","statusCode","status","Promise","reject","fetch","credentials","method","_check","userData","body","JSON","stringify","name","email","movieData","country","director","duration","year","description","image","trailer","nameRU","nameEN","thumbnail","movieId","password","api"],"sources":["/Users/anastasiavolokitina/Documents/GitHub/movies-explorer-frontend/src/utils/Api.jsx"],"sourcesContent":["class Api {\n    constructor(option) {\n        this._baseUrl = option.baseUrl;\n        this._headers = option.headers;\n    }\n\n    _check(res) {\n        if (res.ok) {\n            return res.json();\n          }\n          return res.json()\n            .then((err) => {\n            err.statusCode = res.status; \n            return Promise.reject(err);\n           })\n    }\n\n    getUser() {\n        return fetch(`${this._baseUrl}/users/me`, {\n            credentials: 'include',\n            headers: this._headers,\n            method: 'GET'\n        })\n            .then(res => this._check(res))\n    }\n\n    setUser(userData) {\n        return fetch(`${this._baseUrl}/users/me`, {\n            credentials: 'include',\n            headers: this._headers,\n            method: 'PATCH',\n            body: JSON.stringify({\n                name: userData.name,\n                email: userData.email\n            })\n        })\n            .then(res => this._check(res))\n    }\n\n    getSavedMovies() {\n        return fetch(`${this._baseUrl}/movies`, {\n            credentials: 'include',\n            headers: this._headers,\n            method: 'GET'\n        })\n            .then(res => this._check(res))\n\n    }\n\n    addMovies(movieData) {\n        return fetch(`${this._baseUrl}/movies`, {\n            credentials: 'include',\n            method: 'POST',\n            headers: this._headers,\n            body: JSON.stringify({\n                country: movieData.country,\n                director: movieData.director,\n                duration: movieData.duration,\n                year: movieData.year,\n                description: movieData.description,\n                image: movieData.image,\n                trailer: movieData.trailer,\n                nameRU: movieData.nameRU,\n                nameEN: movieData.nameEN,\n                thumbnail: movieData.thumbnail,\n                movieId: movieData.movieId\n            })\n        })\n            .then(res => this._check(res));\n    }\n\n    deleteSavedMovie(movieId) {\n        return fetch(`${this._baseUrl}/movies/${movieId}`, {\n            credentials: 'include',\n            method: 'DELETE',\n            headers: this._headers,\n        })\n            .then(res => this._check(res))\n    }\n\n    signUp(name, email, password) {\n        return fetch(`${this._baseUrl}/signup`, {\n            credentials: 'include',\n            method: 'POST',\n            headers: this._headers,\n            body: JSON.stringify({\n                name: name,\n                password: password,\n                email: email\n            })\n        })\n            .then(res => this._check(res));\n    }\n\n}\n\nconst api = new Api({\n    baseUrl: 'https://api.movies.anastasiya.nomoredomains.club/',\n    headers: {\n        'Content-Type': 'application/json',\n    }\n});\n\nexport default api;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}